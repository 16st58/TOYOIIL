<!DOCTYPE html>
<html lang="ko">
    <head>
        <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet">
        <style>
            body {font-family: 'SUIT Variable', sans-serif;}
        </style>

        <meta property="og:url" content="">
        <meta property="og:title" content="ê²½ì‚°ê³¼ê³  í¬ì¸íŠ¸ ì ë¦½ ì‚¬ì´íŠ¸">
        <meta property="og:type" content="website">
        <meta property="og:description" content="ê°œì¸ QRì½”ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì¼ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ í¬ì¸íŠ¸ë¥¼ ì ë¦½í•´ì¤ë‹ˆë‹¤.">

        <meta name="color-scheme" content="light only"/>
        <meta name="supported-color-schemes" content="light"/>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>TOYOIIL</title>
        <link rel="stylesheet" href="css/main.css" />
    </head>
    <body>

        <script src="https://code.jquery.com/jquery-latest.min.js"></script>


        <div id="header">
            <img src="image/Logo.svg" alt="TOYOIIL">
            <div id="ip_text_title">ê²½ì‚°ê³¼í•™ê³ (117.110)</div>
            <div></div>
        </div>
        <div id="split_column">
            <div id="main_post" class="main_left_part">
                <div id="large_title">ì œëª©</div>
                <div id="large_date">0ì´ˆ ì „</div>
                <div id="large_content">ë³¸ë¬¸</div>

                <div id="like_count_post">0</div>
                <button id="like_this_post" onclick="like_this_post()">ì¢‹ì•„ìš”</button>
                <button id="dislike_this_post" onclick="dislike_this_post()">ì‹«ì–´ìš”</button>

                <input id="input_comment_to_upload" type="text">
                <button id="button_upload_comment">ëŒ“ê¸€ ì˜¬ë¦¬ê¸°</button>

                <div class="comment_list" id="comment_list_div">
                    <!--
                    <div class="post">
                        <div id="small_title">ì œëª©2</div>
                        <div id="small_content">ë³¸ë¬¸2</div>
                    </div>
                    -->
                </div>
            </div>

            <div id="writePart" class="main_left_part">
                <div>ì œëª©</div>
                <input id="input_title_to_upload" type="text">
                <div>ë³¸ë¬¸</div>
                <textarea id="input_content_to_upload" type="text" onchange="handleResizeHeight()"></textarea>
                <button id="button_upload_post" onclick="clickPostUploadButton()">ê¸€ ë“±ë¡í•˜ê¸°</button>
            </div>
            
            <div id="main_right_part">
                <button id="writeButton" class="right_part_button" onclick="clickWriteButton()">ê¸€ì“°ê¸°</button>
                <button id="stopWriteButton" class="right_part_button" onclick="clickCloseWriteButton()">ë‹«ê¸°</button>

                <div style="margin-left: 4px; margin-top: 20px; margin-bottom: 10px;">ì¸ê¸°ê¸€ğŸ”¥</div>
                <div class="post_list" id="post_list_by_like">
                    
                    <!--
                    <div class="post">
                        <div id="small_title">ì œëª©2</div>
                        <div id="small_content">ë³¸ë¬¸2</div>
                    </div>
                    -->
                </div>

                <div style="margin-left: 4px; margin-top: 20px; margin-bottom: 10px;">ìµœì‹ ê¸€</div>
                <div class="post_list" id="post_list_div">
                    
                    <!--
                    <div class="post">
                        <div id="small_title">ì œëª©2</div>
                        <div id="small_content">ë³¸ë¬¸2</div>
                    </div>
                    -->
                </div>
            </div>
        </div>

        <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
        <script src = "https://www.gstatic.com/firebasejs/8.6.5/firebase-analytics.js"></script>
        <script src = "https://www.gstatic.com/firebasejs/8.6.5/firebase-database.js"></script>
        <script src = "https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
        <script src="/js/util.js"></script>

        <script type="text/javascript">
        /*
        *íŒŒì´ì–´ ë² ì´ìŠ¤ ì´ˆê¸°í™”
        */
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyDrv-N1mvRK2K4_SdL3MnLC7PzuMrRQGTA",
            authDomain: "found-c1aa8.firebaseapp.com",
            projectId: "found-c1aa8",
            storageBucket: "found-c1aa8.appspot.com",
            messagingSenderId: "1093657459998",
            appId: "1:1093657459998:web:3ed5d5c2d4ba9226c71d0f",
            measurementId: "G-PYG2DC8T67"
        };
    
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        //firebase.getAnalytics(app);
        </script>

        <script type="text/javascript">
            const db = firebase.firestore();

        
            let now_ip;

            var id_check;

            //https://stackoverflow.com/questions/391979/how-to-get-clients-ip-address-using-javascript <== ipì£¼ì†Œ ì–»ëŠ” ê³³
            $.getJSON('http://www.geoplugin.net/json.gp', function(data) {
                now_ip = data.geoplugin_request.split(".")[0] + '.' + data.geoplugin_request.split(".")[1];
                console.log(now_ip);
                if(now_ip == '117.110') {
                    document.getElementById('ip_text_title').innerText = 'ê²½ì‚°ê³¼í•™ê³  ' + now_ip;
                } else {
                    document.getElementById('ip_text_title').innerText = now_ip;
                }
                start_function();
                readDataAndResetPostList();
            });

            function start_function() {
            //ë©”ì¸ ê²Œì‹œê¸€ ì ê¸°
            db.collection('board') //ì›í•˜ëŠ” ì»¬ë ‰ì…˜ ì„ íƒí•˜ê¸°, ì§€ê¸ˆì€ productë¥¼ ì„ íƒí•¨
                .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                .collection('post') 
                .orderBy('like', "desc") //ì •ë ¬ë°©ì‹ ìµœì‹ ìë£Œ ë¨¼ì € ì •ë ¬ ê°€ëŠ¥í•¨
                .limit(1) //ê°€ì§€ê³  ì˜¤ëŠ” ê°¯ìˆ˜ë¥¼ ì œí•œ í•  ìˆ˜ ìˆë‹¤.
                .get() //ì´ì œê¹Œì§€ ì •ë³´ë¥¼ í†µí•´ ìë£Œë¥¼ ê°€ì ¸ì˜¤ë¼ëŠ” ì˜ë¯¸
                .then((doc) => { // ê²°ê³¼ë¥¼ thenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.   
                    doc.forEach((result)=>{
                        id_check = result.id; 
                        document.getElementById("large_title").innerText = result.data().title;
                        document.getElementById("large_content").innerText = result.data().content;
                        document.getElementById("large_date").innerText = calculate_date(new Date(result.data().date))
                        document.getElementById("like_count_post").innerText = result.data().like;
                        
                        //ë©”ì¸ ê²Œì‹œê¸€ ëŒ“ê¸€ ì ê¸°
                        db.collection('board') //ì›í•˜ëŠ” ì»¬ë ‰ì…˜ ì„ íƒí•˜ê¸°, ì§€ê¸ˆì€ productë¥¼ ì„ íƒí•¨
                            .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                            .collection('post') 
                            .doc(result.id)
                            .collection('comment')
                            .orderBy('date', "desc") //ì •ë ¬ë°©ì‹ ìµœì‹ ìë£Œ ë¨¼ì € ì •ë ¬ ê°€ëŠ¥í•¨
                            .get() //ì´ì œê¹Œì§€ ì •ë³´ë¥¼ í†µí•´ ìë£Œë¥¼ ê°€ì ¸ì˜¤ë¼ëŠ” ì˜ë¯¸
                            .then((comment_doc) => { // ê²°ê³¼ë¥¼ thenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.  
                                comment_doc.forEach((comment_result)=>{
                                        const parent = document.createElement('div');
                                        //parent.className = "post";
                                        parent.id = comment_result.id
                                        const div_content_element = document.createElement("div");
                                        div_content_element.innerText = comment_result.data().content;
                                        div_content_element.id ="comment_content";
                                        const div_date_element = document.createElement("div");
                                        div_date_element.innerText = calculate_date(new Date(comment_result.data().date));
                                        div_date_element.id = "comment_date";
                                        parent.appendChild(div_date_element);
                                        parent.appendChild(div_content_element);
                                        document.getElementById("comment_list_div").appendChild(parent);
                                })    
                            });


                    })    
                });
            }

            function readDataAndResetPostList() {
                //ë¦¬ìŠ¤íŠ¸ì— ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ ì¶”ê°€
                db.collection('board') //ì›í•˜ëŠ” ì»¬ë ‰ì…˜ ì„ íƒí•˜ê¸°, ì§€ê¸ˆì€ productë¥¼ ì„ íƒí•¨
                    .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                    .collection('post') 
                    .orderBy('like', "desc") //ì •ë ¬ë°©ì‹ ìµœì‹ ìë£Œ ë¨¼ì € ì •ë ¬ ê°€ëŠ¥í•¨
                    .limit(3) //ê°€ì§€ê³  ì˜¤ëŠ” ê°¯ìˆ˜ë¥¼ ì œí•œ í•  ìˆ˜ ìˆë‹¤.
                    .get() //ì´ì œê¹Œì§€ ì •ë³´ë¥¼ í†µí•´ ìë£Œë¥¼ ê°€ì ¸ì˜¤ë¼ëŠ” ì˜ë¯¸
                    .then((doc) => { // ê²°ê³¼ë¥¼ thenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.
                        doc.forEach((result)=>{
                            create_post_list(result, "post_list_by_like");
                        })    
                    });

                //ë¦¬ìŠ¤íŠ¸ì— ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ ì¶”ê°€
                db.collection('board') //ì›í•˜ëŠ” ì»¬ë ‰ì…˜ ì„ íƒí•˜ê¸°, ì§€ê¸ˆì€ productë¥¼ ì„ íƒí•¨
                    .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                    .collection('post') 
                    .orderBy('date', "desc") //ì •ë ¬ë°©ì‹ ìµœì‹ ìë£Œ ë¨¼ì € ì •ë ¬ ê°€ëŠ¥í•¨
                    .get() //ì´ì œê¹Œì§€ ì •ë³´ë¥¼ í†µí•´ ìë£Œë¥¼ ê°€ì ¸ì˜¤ë¼ëŠ” ì˜ë¯¸
                    .then((doc) => { // ê²°ê³¼ë¥¼ thenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.
                        doc.forEach((result)=>{
                            create_post_list(result, "post_list_div");
                        })    
                    });
            }

            function readDataAndResetPostListNumberOfLimit(limit) {
                //ë¦¬ìŠ¤íŠ¸ì— ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ ì¶”ê°€
                db.collection('board') //ì›í•˜ëŠ” ì»¬ë ‰ì…˜ ì„ íƒí•˜ê¸°, ì§€ê¸ˆì€ productë¥¼ ì„ íƒí•¨
                    .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                    .collection('post') 
                    .orderBy('date', "desc") //ì •ë ¬ë°©ì‹ ìµœì‹ ìë£Œ ë¨¼ì € ì •ë ¬ ê°€ëŠ¥í•¨
                    .limit(limit) //ê°€ì§€ê³  ì˜¤ëŠ” ê°¯ìˆ˜ë¥¼ ì œí•œ í•  ìˆ˜ ìˆë‹¤.
                    .get() //ì´ì œê¹Œì§€ ì •ë³´ë¥¼ í†µí•´ ìë£Œë¥¼ ê°€ì ¸ì˜¤ë¼ëŠ” ì˜ë¯¸
                    .then((doc) => { // ê²°ê³¼ë¥¼ thenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.
                        doc.forEach((result)=>{
                            create_post_list(result, "post_list_div");
                        })    
                    });
            }

            function getPostContent(id) {
                db.collection('board') //ì›í•˜ëŠ” ì»¬ë ‰ì…˜ ì„ íƒí•˜ê¸°, ì§€ê¸ˆì€ productë¥¼ ì„ íƒí•¨
                .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                .collection('post') 
                .doc(id) 
                //.orderBy('date', "desc") //ì •ë ¬ë°©ì‹ ìµœì‹ ìë£Œ ë¨¼ì € ì •ë ¬ ê°€ëŠ¥í•¨
                //.limit(1) //ê°€ì§€ê³  ì˜¤ëŠ” ê°¯ìˆ˜ë¥¼ ì œí•œ í•  ìˆ˜ ìˆë‹¤.
                .get() //ì´ì œê¹Œì§€ ì •ë³´ë¥¼ í†µí•´ ìë£Œë¥¼ ê°€ì ¸ì˜¤ë¼ëŠ” ì˜ë¯¸
                .then((doc) => { // ê²°ê³¼ë¥¼ thenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.  
                    document.getElementById("large_title").innerText = doc.data().title;
                    document.getElementById("large_content").innerText = doc.data().content;
                    document.getElementById("large_date").innerText = calculate_date(new Date(doc.data().date));
                    document.getElementById("like_count_post").innerText = doc.data().like;
                });

                document.getElementById("comment_list_div").replaceChildren();

                console.log("í´ë¦­");
                
                db.collection('board') //ì›í•˜ëŠ” ì»¬ë ‰ì…˜ ì„ íƒí•˜ê¸°, ì§€ê¸ˆì€ productë¥¼ ì„ íƒí•¨
                    .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                    .collection('post') 
                    .doc(id) 
                    .collection('comment')
                    .orderBy('date', "desc") //ì •ë ¬ë°©ì‹ ìµœì‹ ìë£Œ ë¨¼ì € ì •ë ¬ ê°€ëŠ¥í•¨
                    //.limit(1) //ê°€ì§€ê³  ì˜¤ëŠ” ê°¯ìˆ˜ë¥¼ ì œí•œ í•  ìˆ˜ ìˆë‹¤.
                    .get() //ì´ì œê¹Œì§€ ì •ë³´ë¥¼ í†µí•´ ìë£Œë¥¼ ê°€ì ¸ì˜¤ë¼ëŠ” ì˜ë¯¸
                    .then((doc) => { // ê²°ê³¼ë¥¼ thenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.
                        doc.forEach((result)=>{
                        //ë©”ì¸ ê²Œì‹œê¸€ ëŒ“ê¸€ ì ê¸°
                        db.collection('board') //ì›í•˜ëŠ” ì»¬ë ‰ì…˜ ì„ íƒí•˜ê¸°, ì§€ê¸ˆì€ productë¥¼ ì„ íƒí•¨
                            .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                            .collection('post') 
                            .doc(id)
                            .collection('comment')
                            .orderBy('date', "desc") //ì •ë ¬ë°©ì‹ ìµœì‹ ìë£Œ ë¨¼ì € ì •ë ¬ ê°€ëŠ¥í•¨
                            .get() //ì´ì œê¹Œì§€ ì •ë³´ë¥¼ í†µí•´ ìë£Œë¥¼ ê°€ì ¸ì˜¤ë¼ëŠ” ì˜ë¯¸
                            .then((comment_doc) => { // ê²°ê³¼ë¥¼ thenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.  
                                comment_doc.forEach((comment_result)=>{
                                        const parent = document.createElement('div');
                                        //parent.className = "post";
                                        parent.id = result.id
                                        const div_content_element = document.createElement("div");
                                        div_content_element.innerText = comment_result.data().content;
                                        div_content_element.id ="comment_content";
                                        const div_date_element = document.createElement("div");
                                        div_date_element.innerText = calculate_date(new Date(comment_result.data().date));
                                        div_date_element.id = "comment_date";
                                        parent.appendChild(div_date_element);
                                        parent.appendChild(div_content_element);
                                        document.getElementById("comment_list_div").appendChild(parent);
                                })    
                            });
                        })    
                    });
            }

            function clickPostUploadButton() {
                db.collection('board')
                .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                .collection('post')
                .add({
                    title : document.getElementById("input_title_to_upload").value,
                    content : document.getElementById("input_content_to_upload").value,
                    date : Date.now(),
                    like :  0
                })
                readDataAndResetPostListNumberOfLimit(1);
                clickCloseWriteButton();
            }

            function clickCommentUploadButton(id) {
                db.collection('board')
                .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                .collection('post')
                .doc(id)
                .collection('comment')
                .add({
                    content : document.getElementById("input_comment_to_upload").value,
                    date : Date.now()
                })

                
                document.getElementById("input_comment_to_upload").value=null;
                        
                //ë©”ì¸ ê²Œì‹œê¸€ ëŒ“ê¸€ ì ê¸°
                db.collection('board') //ì›í•˜ëŠ” ì»¬ë ‰ì…˜ ì„ íƒí•˜ê¸°, ì§€ê¸ˆì€ productë¥¼ ì„ íƒí•¨
                    .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                    .collection('post') 
                    .doc(id)
                    .collection('comment')
                    .orderBy('date', "desc") //ì •ë ¬ë°©ì‹ ìµœì‹ ìë£Œ ë¨¼ì € ì •ë ¬ ê°€ëŠ¥í•¨
                    .limit(1)
                    .get() //ì´ì œê¹Œì§€ ì •ë³´ë¥¼ í†µí•´ ìë£Œë¥¼ ê°€ì ¸ì˜¤ë¼ëŠ” ì˜ë¯¸
                    .then((comment_doc) => { // ê²°ê³¼ë¥¼ thenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.  
                        comment_doc.forEach((comment_result)=>{
                                const parent = document.createElement('div');
                                //parent.className = "post";
                                parent.id = comment_result.id
                                const div_content_element = document.createElement("div");
                                div_content_element.innerText = comment_result.data().content;
                                div_content_element.id ="comment_content";
                                const div_date_element = document.createElement("div");
                                div_date_element.innerText = calculate_date(new Date(comment_result.data().date));
                                div_date_element.id = "comment_date";
                                parent.appendChild(div_date_element);
                                parent.appendChild(div_content_element);
                                document.getElementById("comment_list_div").prepend(parent);
                        })    
                    });

                
                //ì¤‘ë³µ í´ë¦­ ë°©ì§€
                var vm = document.getElementById('button_upload_comment');
                vm.setAttribute("disabled", "disabled");

                setTimeout(function () {
                    vm.removeAttribute("disabled")
                }, 1000)
            }

            function clickWriteButton() {
                //ê¸€ í™•ì¸ ë¶€ë¶„ ì—†ì•°, ê¸€ ì“°ê¸° ë¶€ë¶„ ìƒê¸°ê²Œí•¨
                document.getElementById("main_post").style.display = "none";
                document.getElementById("writePart").style.display = "flex";

                document.getElementById("writeButton").style.display = "none";
                document.getElementById("stopWriteButton").style.display = "block";
            }

            function clickCloseWriteButton() {
                //ê¸€ í™•ì¸ ë¶€ë¶„ ìƒê¸°ê²Œí•¨, ê¸€ ì“°ê¸° ë¶€ë¶„ ì—†ì•°
                document.getElementById("main_post").style.display = "block";
                document.getElementById("writePart").style.display = "none";

                document.getElementById("writeButton").style.display = "flex";
                document.getElementById("stopWriteButton").style.display = "none";
            }

            //ì¢‹ì•„ìš” ë²„íŠ¼ ëˆŒë €ì„ ë•Œ
            function like_this_post() {
                db.collection('board') //ì›í•˜ëŠ” ì»¬ë ‰ì…˜ ì„ íƒí•˜ê¸°, ì§€ê¸ˆì€ productë¥¼ ì„ íƒí•¨
                .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                .collection('post') 
                .doc(id_check) 
                //.orderBy('date', "desc") //ì •ë ¬ë°©ì‹ ìµœì‹ ìë£Œ ë¨¼ì € ì •ë ¬ ê°€ëŠ¥í•¨
                //.limit(1) //ê°€ì§€ê³  ì˜¤ëŠ” ê°¯ìˆ˜ë¥¼ ì œí•œ í•  ìˆ˜ ìˆë‹¤.
                .get() //ì´ì œê¹Œì§€ ì •ë³´ë¥¼ í†µí•´ ìë£Œë¥¼ ê°€ì ¸ì˜¤ë¼ëŠ” ì˜ë¯¸
                .then((doc) => { // ê²°ê³¼ë¥¼ thenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.  
                    db.collection('board')
                        .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                        .collection('post')
                        .doc(id_check)
                        .update({like: doc.data().like+1});
                        document.getElementById("like_count_post").innerText = Number(document.getElementById("like_count_post").innerText)+1;
                });
                
                //ì¤‘ë³µ í´ë¦­ ë°©ì§€
                var vm = document.getElementById('like_this_post');
                var vm2 = document.getElementById('dislike_this_post');
                vm.setAttribute("disabled", "disabled");
                vm2.setAttribute("disabled", "disabled");

                setTimeout(function () {
                    vm.removeAttribute("disabled")
                    vm2.removeAttribute("disabled")
                }, 5000)
            }

            //ì‹«ì–´ìš” ë²„íŠ¼ ëˆŒë €ì„ ë•Œ
            function dislike_this_post() {
                db.collection('board') //ì›í•˜ëŠ” ì»¬ë ‰ì…˜ ì„ íƒí•˜ê¸°, ì§€ê¸ˆì€ productë¥¼ ì„ íƒí•¨
                .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                .collection('post') 
                .doc(id_check) 
                //.orderBy('date', "desc") //ì •ë ¬ë°©ì‹ ìµœì‹ ìë£Œ ë¨¼ì € ì •ë ¬ ê°€ëŠ¥í•¨
                //.limit(1) //ê°€ì§€ê³  ì˜¤ëŠ” ê°¯ìˆ˜ë¥¼ ì œí•œ í•  ìˆ˜ ìˆë‹¤.
                .get() //ì´ì œê¹Œì§€ ì •ë³´ë¥¼ í†µí•´ ìë£Œë¥¼ ê°€ì ¸ì˜¤ë¼ëŠ” ì˜ë¯¸
                .then((doc) => { // ê²°ê³¼ë¥¼ thenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤. 
                    db.collection('board')
                        .doc(now_ip) //ì›í•˜ëŠ” ë„íë¨¼íŠ¸ ì„ íƒí•˜ê¸°
                        .collection('post')
                        .doc(id_check)
                        .update({like: doc.data().like-1});
                        document.getElementById("like_count_post").innerText = Number(document.getElementById("like_count_post").innerText)-1;
                });
                
                //ì¤‘ë³µ í´ë¦­ ë°©ì§€
                var vm = document.getElementById('like_this_post');
                var vm2 = document.getElementById('dislike_this_post');
                vm.setAttribute("disabled", "disabled");
                vm2.setAttribute("disabled", "disabled");

                setTimeout(function () {
                    vm.removeAttribute("disabled")
                    vm2.removeAttribute("disabled")
                }, 5000)
            }

            const handleResizeHeight = () => {
                document.getElementById('input_content_to_upload').current.style.height = 'auto'; //height ì´ˆê¸°í™”
                document.getElementById('input_content_to_upload').current.style.height = textarea.current.scrollHeight + 'px';
            };


            //ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ ìš”ì†Œ í´ë¦­í–ˆì„ë•Œ ê·¸ ê²Œì‹œê¸€ë¡œ ì´ë™
            $(document).on('click', '.post', function(e){
                id_check = $(this).attr("id");
                getPostContent(id_check);

                /*
                var link = '/html/post.html?'+'now_ip'+'?'+id_check;

                location.href=link;
                //location.replace(link);
                window.open(link);
                */
            });

            //ëŒ“ê¸€ ì“°ê¸° ë²„íŠ¼ í´ë¦­í–ˆì„ ë•Œ
            $(document).on('click', '#button_upload_comment', function(e){
                clickCommentUploadButton(id_check);

                /*
                var link = '/html/post.html?'+'now_ip'+'?'+id_check;

                location.href=link;
                //location.replace(link);
                window.open(link);
                */
            });
        </script>
    </body>
</html>